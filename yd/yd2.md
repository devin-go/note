# 总结
```
了解痛点与目标
框架调研与筛选
服务梳理与制定方案
任务安排与执行
公共功能与核心代码，解决难点问题
```
## 了解痛点与目标
```
痛点
    闭源开发，成本高，不稳定
目标
    拥抱开源：rpc框架、api框架、组件替换
    合并些服务，减少部署复杂度
    增加链路追踪
    优化内存
要求
    入参与出参不变
    存储数据结构不变
    支持多平台
```
## 框架调研与筛选
```
选框架的原则：
    流行度
    框架设计理念
    提供的sdk
    结合业务，写样例
    查看源码
```
## 梳理服务与制定方案计划
```
梳理服务：
    对外服务：网关、ngfront、apiserver等（扫码登陆服务）
    鉴权服务：ngauth，ngonline等
    组织架构：ngorg
    IM服务:ngmsg、ngpush
    开放平台:ngopen
    工作台:ngfrom,ngdisk
    管理后台:ngadmin
    缓存服务：redis
    存储服务:leveldb、mysql

制定方案计划
    (1)基础开始：go mod,数据库解耦,降低开发环境复杂度
    (2)内部服务通信协议升级
    (3)服务注册与发现
    (4)组件替换：网关、服务管理、消息服务
    (5)配置改造
    (6)自测
    (7)提测：环境搭建、制定验收标准、升级方案
    (8)内部测试
    (9)对外发布
```
## 任务安排与执行
```
    任务安排
        自己定位角色
        定位开发人员的角色，分配任务
        周会总结，随时沟通
    执行
        go mod
        数据库条件编译，降低开发环境
        自己先改造一个服务、分配任务
        封装公共功能
```
## 公共功能与核心代码，解决难点问题
```
公共功能
    统一启动服务
    中间件
    服务注册与发现
    配置升级
    错误模型
新功能
    链路追踪id
难点
    http透传grcp
    优化服务间传输文件
    根据json tag绑定query参数
    根据proto tag 序列化json(int64字符串问题)
```

## 服务测试验收
```
环境：
    要支持什么平台、内部部署环境
验收范围：
    界面功能
    内部接口测试
    升级部署
    历史数据
内部部署测试：
    观察内存、CPU、日志
```