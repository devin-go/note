# 与内核交互部分
## 需求(要解决的技术点)
```
1.调用一次内核方法，产生一个结果(需调用 open file，是否成功)
2.调用一次内核方法，可能产生多个结果(如 调用预览文件内容，产生文字，或需要远程下载图片)
3.内核事件，如上报埋点等，即服务端没有调用内核方法，但内核有事件需要上报
4.要支持word，et等内核
```
## 技术方案
### 概括
```
服务与内核属于两个进程通信
且两个进程之间有相互调用的关系，只能用双向流解决
```

### 方案一 用grpc双向流
```
缺点：
需要一个端口(随机端口)
优点：
可以复用grpc 服务，不用自己管理服务的细节
```

### 方案二 用fd通信(现在使用的)
```
优点:
直接用fd通信(匿名管道，全双工方式)，不用端口
缺点：
要自己管理服务，如心跳等
要自己模拟一个双向流
```
